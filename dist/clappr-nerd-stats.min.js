!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@guzzj/clappr-core")):"function"==typeof define&&define.amd?define(["@guzzj/clappr-core"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).ClapprNerdStats=e(t.Clappr)}(this,(function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function y(t){var e={exports:{}};return t(e,e.exports),e.exports}var v="__lodash_hash_undefined__",_="[object Function]",b="[object GeneratorFunction]",m=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/,w=/^\./,x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,E=/\\(\\)?/g,T=/^\[object .+?Constructor\]$/,k="object"==typeof d&&d&&d.Object===Object&&d,j="object"==typeof self&&self&&self.Object===Object&&self,O=k||j||Function("return this")();var P,C=Array.prototype,S=Function.prototype,A=Object.prototype,R=O["__core-js_shared__"],B=(P=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",N=S.toString,M=A.hasOwnProperty,I=A.toString,F=RegExp("^"+N.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),z=O.Symbol,L=C.splice,$=Z(O,"Map"),U=Z(Object,"create"),D=z?z.prototype:void 0,H=D?D.toString:void 0;function G(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function W(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function K(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function V(t,e){for(var n,r,a=t.length;a--;)if((n=t[a][0])===(r=e)||n!=n&&r!=r)return a;return-1}function Y(t,e){for(var n,r=0,a=(e=function(t,e){if(et(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||rt(t))return!0;return g.test(t)||!m.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:et(n=e)?n:J(n)).length;null!=t&&r<a;)t=t[Q(e[r++])];return r&&r==a?t:void 0}function q(t){return!(!nt(t)||(e=t,B&&B in e))&&(function(t){var e=nt(t)?I.call(t):"";return e==_||e==b}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?F:T).test(function(t){if(null!=t){try{return N.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function X(t,e){var n,r,a=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof e?"string":"hash"]:a.map}function Z(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return q(n)?n:void 0}G.prototype.clear=function(){this.__data__=U?U(null):{}},G.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},G.prototype.get=function(t){var e=this.__data__;if(U){var n=e[t];return n===v?void 0:n}return M.call(e,t)?e[t]:void 0},G.prototype.has=function(t){var e=this.__data__;return U?void 0!==e[t]:M.call(e,t)},G.prototype.set=function(t,e){return this.__data__[t]=U&&void 0===e?v:e,this},W.prototype.clear=function(){this.__data__=[]},W.prototype.delete=function(t){var e=this.__data__,n=V(e,t);return!(n<0)&&(n==e.length-1?e.pop():L.call(e,n,1),!0)},W.prototype.get=function(t){var e=this.__data__,n=V(e,t);return n<0?void 0:e[n][1]},W.prototype.has=function(t){return V(this.__data__,t)>-1},W.prototype.set=function(t,e){var n=this.__data__,r=V(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},K.prototype.clear=function(){this.__data__={hash:new G,map:new($||W),string:new G}},K.prototype.delete=function(t){return X(this,t).delete(t)},K.prototype.get=function(t){return X(this,t).get(t)},K.prototype.has=function(t){return X(this,t).has(t)},K.prototype.set=function(t,e){return X(this,t).set(t,e),this};var J=tt((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(rt(t))return H?H.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return w.test(t)&&n.push(""),t.replace(x,(function(t,e,r,a){n.push(r?a.replace(E,"$1"):e||t)})),n}));function Q(t){if("string"==typeof t||rt(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function tt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=e?e.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var s=t.apply(this,r);return n.cache=i.set(a,s),s};return n.cache=new(tt.Cache||K),n}tt.Cache=K;var et=Array.isArray;function nt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function rt(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==I.call(t)}var at=function(t,e,n){var r=null==t?void 0:Y(t,e);return void 0===r?n:r};function it(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var a=l(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}var st=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(s,e);var n,r,a,i=it(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this,t))._runEach=at(t,"options.clapprStats.runEach",5e3),e._onReport=at(t,"options.clapprStats.onReport",e._defaultReport),e._uriToMeasureLatency=at(t,"options.clapprStats.uriToMeasureLatency"),e._urisToMeasureBandwidth=at(t,"options.clapprStats.urisToMeasureBandwidth"),e._runBandwidthTestEvery=at(t,"options.clapprStats.runBandwidthTestEvery",10),e._bwMeasureCount=0,e._completion={watch:at(t,"options.clapprStats.onCompletion",[]),calls:[]},e._newMetrics(),e.on(s.REPORT_EVENT,e._onReport),e}return n=s,(r=[{key:"name",get:function(){return"clappr_stats"}},{key:"supportedVersion",get:function(){return{min:"0.4.2"}}},{key:"_playbackName",get:function(){return this.container.playback.name}},{key:"_playbackType",get:function(){return this.container.getPlaybackType()}},{key:"_now",value:function(){return window.performance&&"function"==typeof window.performance.now?window.performance.now():new Date}},{key:"_inc",value:function(t){this._metrics.counters[t]+=1}},{key:"_timerHasStarted",value:function(t){return void 0!==this["_start".concat(t)]}},{key:"_start",value:function(t){this["_start".concat(t)]=this._now()}},{key:"_stop",value:function(t){this._metrics.timers[t]+=this._now()-this["_start".concat(t)]}},{key:"_defaultReport",value:function(t){console.log(t)}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,t.Events.CONTAINER_BITRATE,this.onBitrate),this.listenTo(this.container,t.Events.CONTAINER_STOP,this.stopReporting),this.listenTo(this.container,t.Events.CONTAINER_ENDED,this.stopReporting),this.listenToOnce(this.container.playback,t.Events.PLAYBACK_PLAY_INTENT,this.startTimers),this.listenToOnce(this.container,t.Events.CONTAINER_PLAY,this.onFirstPlaying),this.listenTo(this.container,t.Events.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,t.Events.CONTAINER_PAUSE,this.onPause),this.listenToOnce(this.container,t.Events.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,t.Events.CONTAINER_SEEK,this.onSeek),this.listenTo(this.container,t.Events.CONTAINER_ERROR,(function(){return e._inc("error")})),this.listenTo(this.container,t.Events.CONTAINER_FULLSCREEN,(function(){return e._inc("fullscreen")})),this.listenTo(this.container,t.Events.CONTAINER_PLAYBACKDVRSTATECHANGED,(function(t){t&&e._inc("dvrUsage")})),this.listenTo(this.container.playback,t.Events.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.container.playback,t.Events.PLAYBACK_TIMEUPDATE,this.onTimeUpdate)}},{key:"destroy",value:function(){this.stopReporting(),u(l(s.prototype),"destroy",this).call(this)}},{key:"onBitrate",value:function(t){var e=parseInt(at(t,"bitrate",0),10),n=this._now();if(this._metrics.extra.bitratesHistory.length>0){var r=this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1];r.end=n,r.time=n-r.start}this._metrics.extra.bitratesHistory.push({start:this._now(),bitrate:e}),this._inc("changeLevel")}},{key:"stopReporting",value:function(){this._buildReport(),clearInterval(this._intervalId),this._newMetrics(),this.stopListening(),this.bindEvents()}},{key:"startTimers",value:function(){this._intervalId=setInterval(this._buildReport.bind(this),this._runEach),this._start("session"),this._start("startup")}},{key:"onFirstPlaying",value:function(){this.listenTo(this.container,t.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying),this._start("watch"),this._stop("startup")}},{key:"playAfterPause",value:function(){this.listenTo(this.container,t.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying),this._stop("pause"),this._start("watch")}},{key:"onPlay",value:function(){this._inc("play")}},{key:"onPause",value:function(){this._stop("watch"),this._start("pause"),this._inc("pause"),this.listenToOnce(this.container,t.Events.CONTAINER_PLAY,this.playAfterPause),this.stopListening(this.container,t.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying)}},{key:"onSeek",value:function(t){this._inc("seek"),this._metrics.extra.watchHistory.push([1e3*t,1e3*t])}},{key:"onTimeUpdate",value:function(t){var e=1e3*t.current,n=1e3*t.total,r=this._metrics.extra.watchHistory.length;if(this._metrics.extra.duration=n,this._metrics.extra.currentTime=e,this._metrics.extra.watchedPercentage=e/n*100,0===r?this._metrics.extra.watchHistory.push([e,e]):this._metrics.extra.watchHistory[r-1][1]=e,this._metrics.extra.bitratesHistory.length>0){var a=this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1];a.end||(a.time=this._now()-a.start)}this._onCompletion()}},{key:"onContainerUpdateWhilePlaying",value:function(){this.container.playback.isPlaying()&&(this._stop("watch"),this._start("watch"))}},{key:"onBuffering",value:function(){this._inc("buffering"),this._start("buffering"),this.listenToOnce(this.container,t.Events.CONTAINER_STATE_BUFFERFULL,this.onBufferfull)}},{key:"onBufferfull",value:function(){this._stop("buffering"),this.listenToOnce(this.container,t.Events.CONTAINER_STATE_BUFFERING,this.onBuffering)}},{key:"onProgress",value:function(t){this._metrics.extra.buffersize=1e3*t.current}},{key:"_newMetrics",value:function(){this._metrics={counters:{play:0,pause:0,error:0,buffering:0,decodedFrames:0,droppedFrames:0,fps:0,changeLevel:0,seek:0,fullscreen:0,dvrUsage:0},timers:{startup:0,watch:0,pause:0,buffering:0,session:0,latency:0},extra:{playbackName:"",playbackType:"",bitratesHistory:[],bitrateWeightedMean:0,bitrateMostUsed:0,buffersize:0,watchHistory:[],watchedPercentage:0,bufferingPercentage:0,bandwidth:0,duration:0,currentTime:0}}}},{key:"_onCompletion",value:function(){var e=this._metrics.extra.watchedPercentage,n=this._completion.watch,r=-1!=this._completion.calls.indexOf(e);-1==n.indexOf(e)||r||(t.Log.info(this.name+" PERCENTAGE_EVENT: "+e),this._completion.calls.push(e),this.trigger(s.PERCENTAGE_EVENT,e))}},{key:"_buildReport",value:function(){this._stop("session"),this._start("session"),this._metrics.extra.playbackName=this._playbackName,this._metrics.extra.playbackType=this._playbackType,this._calculateBitrates(),this._calculatePercentages(),this._fetchFPS(),this._measureLatency(),this._measureBandwidth(),this.trigger(s.REPORT_EVENT,JSON.parse(JSON.stringify(this._metrics)))}},{key:"_fetchFPS",value:function(){var t={html5_video:this._html5FetchFPS,hls:this._html5FetchFPS,dash_shaka_playback:this._html5FetchFPS};t[this._playbackName]&&t[this._playbackName].call(this)}},{key:"_calculateBitrates",value:function(){var t=this._metrics.extra.bitratesHistory.map((function(t){return t.time})).reduce((function(t,e){return t+e}),0);this._metrics.extra.bitrateWeightedMean=this._metrics.extra.bitratesHistory.map((function(t){return t.bitrate*t.time})).reduce((function(t,e){return t+e}),0)/t,this._metrics.extra.bitratesHistory.length>0&&(this._metrics.extra.bitrateMostUsed=this._metrics.extra.bitratesHistory.slice().sort((function(t,e){return t.time<e.time}))[0].bitrate)}},{key:"_calculatePercentages",value:function(){this._metrics.extra.duration>0&&(this._metrics.extra.bufferingPercentage=this._metrics.timers.buffering/this._metrics.extra.duration*100)}},{key:"_html5FetchFPS",value:function(){var t=this.container.playback.el,e=t.webkitDecodedFrameCount||t.mozDecodedFrames||0,n=t.webkitDroppedFrameCount||t.mozParsedFrames-t.mozDecodedFrames||0,r=e-(this._lastDecodedFramesCount||0);this._metrics.counters.decodedFrames=e,this._metrics.counters.droppedFrames=n,this._metrics.counters.fps=r/(this._runEach/1e3),this._lastDecodedFramesCount=e}},{key:"_measureLatency",value:function(){var t=this;if(this._uriToMeasureLatency){var e,n=[],r=function(){e=n[2]-n[1],t._metrics.timers.latency=e};!function e(){if(n.push(t._now()),n.length>2)r();else{var a=new Image;a.onload=e,a.src=t._uriToMeasureLatency+"?"+Math.random()+"="+t._now()}}()}}},{key:"_measureBandwidth",value:function(){var t=this;if(this._urisToMeasureBandwidth&&this._bwMeasureCount%this._runBandwidthTestEvery==0){var e=0,n=function(n){var r=(t._urisToMeasureBandwidth[e-1].end-t._urisToMeasureBandwidth[e-1].start)/1e3,a=8*n.loaded/r;t._metrics.extra.bandwidth=a,t._urisToMeasureBandwidth.forEach((function(t){t.start=0,t.end=0,t.expired=!1,clearTimeout(t.timer)}))};!function r(a){if(e>0&&(t._urisToMeasureBandwidth[e-1].end=t._now(),clearTimeout(t._urisToMeasureBandwidth[e-1].timer)),e>=t._urisToMeasureBandwidth.length||e>0&&t._urisToMeasureBandwidth[e-1].expired)n(a);else{var i=new XMLHttpRequest;i.open("GET",t._urisToMeasureBandwidth[e].url,!0),i.responseType="arraybuffer",i.onload=i.onabort=r,t._urisToMeasureBandwidth[e].start=t._now(),t._urisToMeasureBandwidth[e].timer=setTimeout((function(e){t._urisToMeasureBandwidth[e].expired=!0,i.abort()}),t._urisToMeasureBandwidth[e].timeout,e),i.send()}e++}()}this._bwMeasureCount++}}])&&c(n.prototype,r),a&&c(n,a),s}(t.ContainerPlugin);st.REPORT_EVENT="clappr:stats:report",st.PERCENTAGE_EVENT="clappr:stats:percentage";var ot=".clappr-nerd-stats[data-clappr-nerd-stats] .stats-box {\n  position: absolute;\n  display: inline-block;\n  overflow: hidden;\n  top: 5px;\n  left: 5px;\n  padding: 5px 5px 5px 5px;\n  margin: 0;\n  line-height: 20px;\n  font-size: 11px;\n  box-shadow: 0 0 0 1px hsla(0, 0%, 100%, 0.15);\n  background: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  z-index: 999;\n  width: 260px;\n  max-height: 300px;\n  border-radius: 4px;\n  transition: opacity .2s ease .1s, width .3s ease, max-height .3s ease;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box.hidden {\n  transition: opacity .2s ease .1s, width .3s ease, max-height .3s ease;\n  width: 30px;\n  max-height: 30px;\n  z-index: 0;\n  opacity: 0;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box div,\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box ul,\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box a {\n  transition: opacity .1s ease .2s;\n  opacity: 1;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box.hidden div,\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box.hidden ul,\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box.hidden a {\n  transition: opacity .1s ease;\n  opacity: 0;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .nerd-title {\n  font-size: 14px;\n  font-family: sans-serif;\n  font-weight: 100 !important;\n  letter-spacing: 1px;\n  border-bottom: 1px solid rgba(255, 255, 255, .3);\n  padding-bottom: 4px;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .general {\n  display: flex;\n  flex-wrap: wrap;\n  flex: 1 1 auto;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .general .general-metric {\n  flex: 0 0 50%;\n  flex-basis: 0;\n  flex-grow: 1;\n  max-width: 50%;\n  width: 50%;\n  padding: 8px;\n  text-align: center;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .general .general-metric .metric {\n  font-size: 20px;\n  letter-spacing: 1px;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .general .general-metric .metric-title {\n  font-size: 8px;\n  letter-spacing: 1px;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .metric-selector {\n  display: flex;\n  flex-wrap: wrap;\n  flex: 1 1 auto;\n  margin-bottom: 4px;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .metric-selector .metric-selector-item {\n  flex-basis: 0;\n  flex-grow: 1;\n  max-width: 100%;\n  padding: 0 4px;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .metric-selector .metric-selector-item a {\n  text-decoration: none;\n  letter-spacing: 1px;\n  color: white;\n  width: 100%;\n  font-size: 10px;\n  display: block;\n  text-transform: uppercase;\n  border-radius: 2px;\n  background: transparent;\n  transition: background .2s ease;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .metric-selector .metric-selector-item a:hover {\n  background: rgba(255, 255, 255, .1);\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .metric-selector .metric-selector-item a.active {\n  background: rgba(255, 255, 255, .3);\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats {\n  position: relative;\n  overflow-y: hidden;\n  overflow-x: hidden;\n  max-height: 190px;\n  padding: 5px 5px 5px 5px;\n  width: 100%;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats.scroll {\n  padding: 5px 10px 5px 5px;\n  width: 109%;\n  overflow-y: auto;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats ul {\n  float: left;\n  width: 100%;\n  overflow-y: auto;\n  display: none;\n  transition: transform .2s ease;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats ul.current,\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats ul.enter {\n  display: block;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats ul.enter {\n  position: absolute;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats ul.enter.reverse,\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats ul.leave.forward {\n  transform: translateX(-105%);\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats ul.enter.forward,\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats ul.leave.reverse {\n  transform: translateX(105%);\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats ul, li {\n  list-style-type: none;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats li:nth-child(2n) {\n  background: hsla(0, 0%, 100%, 0.15);\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats li {\n  padding: 0 5px;\n  text-align: left;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats li.title {\n  text-align: center;\n  font-weight: bold;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box .stats li div {\n  padding-left: 5px;\n  margin: 0;\n  float: right;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .stats-box a.close-button {\n  position: absolute;\n  right: 0.3em;\n  top: 5px;\n  font-size: 24px;\n  cursor: pointer;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .icon-show-stats {\n  display: none;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .icon-show-stats.ready {\n  display: block;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .icon-show-stats svg {\n  z-index: 1000;\n  position: absolute;\n  float: right;\n  color: white;\n  display: none;\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n  opacity: .6;\n  transition: opacity .2s ease;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .icon-show-stats.hide-button svg {\n  opacity: .0;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .icon-show-stats svg:hover {\n  opacity: .8;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .icon-show-stats.active svg, .clappr-nerd-stats[data-clappr-nerd-stats] .icon-show-stats.hide-button.active svg {\n  opacity: 1;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .icon-show-stats.top-right svg {\n  display: block;\n  top: 5px;\n  right: 10px;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .icon-show-stats.top-left svg {\n  display: block;\n  top: 5px;\n  left: 10px;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .icon-show-stats.bottom-right svg {\n  display: block;\n  right: 10px;\n  bottom: 5px;\n}\n\n.clappr-nerd-stats[data-clappr-nerd-stats] .icon-show-stats.bottom-left svg {\n  display: block;\n  bottom: 5px;\n  left: 10px;\n}\n";!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}}(ot);var ct=y((function(t,e){var n="__lodash_hash_undefined__",r=9007199254740991,a="[object Arguments]",i="[object Boolean]",s="[object Date]",o="[object Function]",c="[object GeneratorFunction]",l="[object Map]",u="[object Number]",p="[object Object]",f="[object Promise]",h="[object RegExp]",y="[object Set]",v="[object String]",_="[object Symbol]",b="[object WeakMap]",m="[object ArrayBuffer]",g="[object DataView]",w="[object Float32Array]",x="[object Float64Array]",E="[object Int8Array]",T="[object Int16Array]",k="[object Int32Array]",j="[object Uint8Array]",O="[object Uint8ClampedArray]",P="[object Uint16Array]",C="[object Uint32Array]",S=/\w*$/,A=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,B={};B[a]=B["[object Array]"]=B[m]=B[g]=B[i]=B[s]=B[w]=B[x]=B[E]=B[T]=B[k]=B[l]=B[u]=B[p]=B[h]=B[y]=B[v]=B[_]=B[j]=B[O]=B[P]=B[C]=!0,B["[object Error]"]=B[o]=B[b]=!1;var N="object"==typeof d&&d&&d.Object===Object&&d,M="object"==typeof self&&self&&self.Object===Object&&self,I=N||M||Function("return this")(),F=e&&!e.nodeType&&e,z=F&&t&&!t.nodeType&&t,L=z&&z.exports===F;function $(t,e){return t.set(e[0],e[1]),t}function U(t,e){return t.add(e),t}function D(t,e,n,r){var a=-1,i=t?t.length:0;for(r&&i&&(n=t[++a]);++a<i;)n=e(n,t[a],a,t);return n}function H(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function G(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function W(t,e){return function(n){return t(e(n))}}function K(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var V=Array.prototype,Y=Function.prototype,q=Object.prototype,X=I["__core-js_shared__"],Z=function(){var t=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),J=Y.toString,Q=q.hasOwnProperty,tt=q.toString,et=RegExp("^"+J.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=L?I.Buffer:void 0,rt=I.Symbol,at=I.Uint8Array,it=W(Object.getPrototypeOf,Object),st=Object.create,ot=q.propertyIsEnumerable,ct=V.splice,lt=Object.getOwnPropertySymbols,ut=nt?nt.isBuffer:void 0,pt=W(Object.keys,Object),ft=Ft(I,"DataView"),ht=Ft(I,"Map"),dt=Ft(I,"Promise"),yt=Ft(I,"Set"),vt=Ft(I,"WeakMap"),_t=Ft(Object,"create"),bt=Dt(ft),mt=Dt(ht),gt=Dt(dt),wt=Dt(yt),xt=Dt(vt),Et=rt?rt.prototype:void 0,Tt=Et?Et.valueOf:void 0;function kt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function jt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ot(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Pt(t){this.__data__=new jt(t)}function Ct(t,e){var n=Gt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Wt(t)}(t)&&Q.call(t,"callee")&&(!ot.call(t,"callee")||tt.call(t)==a)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,i=!!r;for(var s in t)!e&&!Q.call(t,s)||i&&("length"==s||$t(s,r))||n.push(s);return n}function St(t,e,n){var r=t[e];Q.call(t,e)&&Ht(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function At(t,e){for(var n=t.length;n--;)if(Ht(t[n][0],e))return n;return-1}function Rt(t,e,n,r,f,d,b){var A;if(r&&(A=d?r(t,f,d,b):r(t)),void 0!==A)return A;if(!Yt(t))return t;var R=Gt(t);if(R){if(A=function(t){var e=t.length,n=t.constructor(e);e&&"string"==typeof t[0]&&Q.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!e)return function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(t,A)}else{var N=Lt(t),M=N==o||N==c;if(Kt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(N==p||N==a||M&&!d){if(H(t))return d?t:{};if(A=function(t){return"function"!=typeof t.constructor||Ut(t)?{}:(e=it(t),Yt(e)?st(e):{});var e}(M?{}:t),!e)return function(t,e){return Mt(t,zt(t),e)}(t,function(t,e){return t&&Mt(e,qt(e),t)}(A,t))}else{if(!B[N])return d?t:{};A=function(t,e,n,r){var a=t.constructor;switch(e){case m:return Nt(t);case i:case s:return new a(+t);case g:return function(t,e){var n=e?Nt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,r);case w:case x:case E:case T:case k:case j:case O:case P:case C:return function(t,e){var n=e?Nt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,r);case l:return function(t,e,n){return D(e?n(G(t),!0):G(t),$,new t.constructor)}(t,r,n);case u:case v:return new a(t);case h:return function(t){var e=new t.constructor(t.source,S.exec(t));return e.lastIndex=t.lastIndex,e}(t);case y:return function(t,e,n){return D(e?n(K(t),!0):K(t),U,new t.constructor)}(t,r,n);case _:return o=t,Tt?Object(Tt.call(o)):{}}var o}(t,N,Rt,e)}}b||(b=new Pt);var I=b.get(t);if(I)return I;if(b.set(t,A),!R)var F=n?function(t){return function(t,e,n){var r=e(t);return Gt(t)?r:function(t,e){for(var n=-1,r=e.length,a=t.length;++n<r;)t[a+n]=e[n];return t}(r,n(t))}(t,qt,zt)}(t):qt(t);return function(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n,t););}(F||t,(function(a,i){F&&(a=t[i=a]),St(A,i,Rt(a,e,n,r,i,t,b))})),A}function Bt(t){return!(!Yt(t)||(e=t,Z&&Z in e))&&(Vt(t)||H(t)?et:A).test(Dt(t));var e}function Nt(t){var e=new t.constructor(t.byteLength);return new at(e).set(new at(t)),e}function Mt(t,e,n,r){n||(n={});for(var a=-1,i=e.length;++a<i;){var s=e[a],o=r?r(n[s],t[s],s,n,t):void 0;St(n,s,void 0===o?t[s]:o)}return n}function It(t,e){var n,r,a=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof e?"string":"hash"]:a.map}function Ft(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Bt(n)?n:void 0}kt.prototype.clear=function(){this.__data__=_t?_t(null):{}},kt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},kt.prototype.get=function(t){var e=this.__data__;if(_t){var r=e[t];return r===n?void 0:r}return Q.call(e,t)?e[t]:void 0},kt.prototype.has=function(t){var e=this.__data__;return _t?void 0!==e[t]:Q.call(e,t)},kt.prototype.set=function(t,e){return this.__data__[t]=_t&&void 0===e?n:e,this},jt.prototype.clear=function(){this.__data__=[]},jt.prototype.delete=function(t){var e=this.__data__,n=At(e,t);return!(n<0)&&(n==e.length-1?e.pop():ct.call(e,n,1),!0)},jt.prototype.get=function(t){var e=this.__data__,n=At(e,t);return n<0?void 0:e[n][1]},jt.prototype.has=function(t){return At(this.__data__,t)>-1},jt.prototype.set=function(t,e){var n=this.__data__,r=At(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},Ot.prototype.clear=function(){this.__data__={hash:new kt,map:new(ht||jt),string:new kt}},Ot.prototype.delete=function(t){return It(this,t).delete(t)},Ot.prototype.get=function(t){return It(this,t).get(t)},Ot.prototype.has=function(t){return It(this,t).has(t)},Ot.prototype.set=function(t,e){return It(this,t).set(t,e),this},Pt.prototype.clear=function(){this.__data__=new jt},Pt.prototype.delete=function(t){return this.__data__.delete(t)},Pt.prototype.get=function(t){return this.__data__.get(t)},Pt.prototype.has=function(t){return this.__data__.has(t)},Pt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof jt){var r=n.__data__;if(!ht||r.length<199)return r.push([t,e]),this;n=this.__data__=new Ot(r)}return n.set(t,e),this};var zt=lt?W(lt,Object):function(){return[]},Lt=function(t){return tt.call(t)};function $t(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||R.test(t))&&t>-1&&t%1==0&&t<e}function Ut(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||q)}function Dt(t){if(null!=t){try{return J.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ht(t,e){return t===e||t!=t&&e!=e}(ft&&Lt(new ft(new ArrayBuffer(1)))!=g||ht&&Lt(new ht)!=l||dt&&Lt(dt.resolve())!=f||yt&&Lt(new yt)!=y||vt&&Lt(new vt)!=b)&&(Lt=function(t){var e=tt.call(t),n=e==p?t.constructor:void 0,r=n?Dt(n):void 0;if(r)switch(r){case bt:return g;case mt:return l;case gt:return f;case wt:return y;case xt:return b}return e});var Gt=Array.isArray;function Wt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!Vt(t)}var Kt=ut||function(){return!1};function Vt(t){var e=Yt(t)?tt.call(t):"";return e==o||e==c}function Yt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function qt(t){return Wt(t)?Ct(t):function(t){if(!Ut(t))return pt(t);var e=[];for(var n in Object(t))Q.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}t.exports=function(t){return Rt(t,!0,!0)}})),lt=y((function(t,e){var n="__lodash_hash_undefined__",r=9007199254740991,a="[object Arguments]",i="[object Function]",s="[object Object]",o=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l[a]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l[i]=l["[object Map]"]=l["[object Number]"]=l[s]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1;var u="object"==typeof d&&d&&d.Object===Object&&d,p="object"==typeof self&&self&&self.Object===Object&&self,f=u||p||Function("return this")(),h=e&&!e.nodeType&&e,y=h&&t&&!t.nodeType&&t,v=y&&y.exports===h,_=v&&u.process,b=function(){try{var t=y&&y.require&&y.require("util").types;return t||_&&_.binding&&_.binding("util")}catch(t){}}(),m=b&&b.isTypedArray;function g(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var w,x,E=Array.prototype,T=Function.prototype,k=Object.prototype,j=f["__core-js_shared__"],O=T.toString,P=k.hasOwnProperty,C=function(){var t=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),S=k.toString,A=O.call(Object),R=RegExp("^"+O.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=v?f.Buffer:void 0,N=f.Symbol,M=f.Uint8Array,I=B?B.allocUnsafe:void 0,F=(w=Object.getPrototypeOf,x=Object,function(t){return w(x(t))}),z=Object.create,L=k.propertyIsEnumerable,$=E.splice,U=N?N.toStringTag:void 0,D=function(){try{var t=ht(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),H=B?B.isBuffer:void 0,G=Math.max,W=Date.now,K=ht(f,"Map"),V=ht(Object,"create"),Y=function(){function t(){}return function(e){if(!kt(e))return{};if(z)return z(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function q(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function X(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Z(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function J(t){var e=this.__data__=new X(t);this.size=e.size}function Q(t,e){var n=gt(t),r=!n&&mt(t),a=!n&&!r&&xt(t),i=!n&&!r&&!a&&Ot(t),s=n||r||a||i,o=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=o.length;for(var l in t)!e&&!P.call(t,l)||s&&("length"==l||a&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||dt(l,c))||o.push(l);return o}function tt(t,e,n){(void 0!==n&&!bt(t[e],n)||void 0===n&&!(e in t))&&rt(t,e,n)}function et(t,e,n){var r=t[e];P.call(t,e)&&bt(r,n)&&(void 0!==n||e in t)||rt(t,e,n)}function nt(t,e){for(var n=t.length;n--;)if(bt(t[n][0],e))return n;return-1}function rt(t,e,n){"__proto__"==e&&D?D(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}q.prototype.clear=function(){this.__data__=V?V(null):{},this.size=0},q.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},q.prototype.get=function(t){var e=this.__data__;if(V){var r=e[t];return r===n?void 0:r}return P.call(e,t)?e[t]:void 0},q.prototype.has=function(t){var e=this.__data__;return V?void 0!==e[t]:P.call(e,t)},q.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=V&&void 0===e?n:e,this},X.prototype.clear=function(){this.__data__=[],this.size=0},X.prototype.delete=function(t){var e=this.__data__,n=nt(e,t);return!(n<0)&&(n==e.length-1?e.pop():$.call(e,n,1),--this.size,!0)},X.prototype.get=function(t){var e=this.__data__,n=nt(e,t);return n<0?void 0:e[n][1]},X.prototype.has=function(t){return nt(this.__data__,t)>-1},X.prototype.set=function(t,e){var n=this.__data__,r=nt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Z.prototype.clear=function(){this.size=0,this.__data__={hash:new q,map:new(K||X),string:new q}},Z.prototype.delete=function(t){var e=ft(this,t).delete(t);return this.size-=e?1:0,e},Z.prototype.get=function(t){return ft(this,t).get(t)},Z.prototype.has=function(t){return ft(this,t).has(t)},Z.prototype.set=function(t,e){var n=ft(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},J.prototype.clear=function(){this.__data__=new X,this.size=0},J.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},J.prototype.get=function(t){return this.__data__.get(t)},J.prototype.has=function(t){return this.__data__.has(t)},J.prototype.set=function(t,e){var n=this.__data__;if(n instanceof X){var r=n.__data__;if(!K||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Z(r)}return n.set(t,e),this.size=n.size,this};var at,it=function(t,e,n){for(var r=-1,a=Object(t),i=n(t),s=i.length;s--;){var o=i[at?s:++r];if(!1===e(a[o],o,a))break}return t};function st(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":U&&U in Object(t)?function(t){var e=P.call(t,U),n=t[U];try{t[U]=void 0;var r=!0}catch(t){}var a=S.call(t);r&&(e?t[U]=n:delete t[U]);return a}(t):function(t){return S.call(t)}(t)}function ot(t){return jt(t)&&st(t)==a}function ct(t){return!(!kt(t)||function(t){return!!C&&C in t}(t))&&(Et(t)?R:o).test(function(t){if(null!=t){try{return O.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function lt(t){if(!kt(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=yt(t),n=[];for(var r in t)("constructor"!=r||!e&&P.call(t,r))&&n.push(r);return n}function ut(t,e,n,r,a){t!==e&&it(e,(function(i,o){if(a||(a=new J),kt(i))!function(t,e,n,r,a,i,o){var c=vt(t,n),l=vt(e,n),u=o.get(l);if(u)return void tt(t,n,u);var p=i?i(c,l,n+"",t,e,o):void 0,f=void 0===p;if(f){var h=gt(l),d=!h&&xt(l),y=!h&&!d&&Ot(l);p=l,h||d||y?gt(c)?p=c:jt(g=c)&&wt(g)?p=function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(c):d?(f=!1,p=function(t,e){if(e)return t.slice();var n=t.length,r=I?I(n):new t.constructor(n);return t.copy(r),r}(l,!0)):y?(f=!1,v=l,_=!0?(b=v.buffer,m=new b.constructor(b.byteLength),new M(m).set(new M(b)),m):v.buffer,p=new v.constructor(_,v.byteOffset,v.length)):p=[]:function(t){if(!jt(t)||st(t)!=s)return!1;var e=F(t);if(null===e)return!0;var n=P.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&O.call(n)==A}(l)||mt(l)?(p=c,mt(c)?p=function(t){return function(t,e,n,r){var a=!n;n||(n={});var i=-1,s=e.length;for(;++i<s;){var o=e[i],c=r?r(n[o],t[o],o,n,t):void 0;void 0===c&&(c=t[o]),a?rt(n,o,c):et(n,o,c)}return n}(t,Pt(t))}(c):kt(c)&&!Et(c)||(p=function(t){return"function"!=typeof t.constructor||yt(t)?{}:Y(F(t))}(l))):f=!1}var v,_,b,m;var g;f&&(o.set(l,p),a(p,l,r,i,o),o.delete(l));tt(t,n,p)}(t,e,o,n,ut,r,a);else{var c=r?r(vt(t,o),i,o+"",t,e,a):void 0;void 0===c&&(c=i),tt(t,o,c)}}),Pt)}function pt(t,e){return _t(function(t,e,n){return e=G(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,i=G(r.length-e,0),s=Array(i);++a<i;)s[a]=r[e+a];a=-1;for(var o=Array(e+1);++a<e;)o[a]=r[a];return o[e]=n(s),g(t,this,o)}}(t,e,At),t+"")}function ft(t,e){var n,r,a=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof e?"string":"hash"]:a.map}function ht(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return ct(n)?n:void 0}function dt(t,e){var n=typeof t;return!!(e=null==e?r:e)&&("number"==n||"symbol"!=n&&c.test(t))&&t>-1&&t%1==0&&t<e}function yt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||k)}function vt(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var _t=function(t){var e=0,n=0;return function(){var r=W(),a=16-(r-n);if(n=r,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(D?function(t,e){return D(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:At);function bt(t,e){return t===e||t!=t&&e!=e}var mt=ot(function(){return arguments}())?ot:function(t){return jt(t)&&P.call(t,"callee")&&!L.call(t,"callee")},gt=Array.isArray;function wt(t){return null!=t&&Tt(t.length)&&!Et(t)}var xt=H||function(){return!1};function Et(t){if(!kt(t))return!1;var e=st(t);return e==i||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Tt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}function kt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function jt(t){return null!=t&&"object"==typeof t}var Ot=m?function(t){return function(e){return t(e)}}(m):function(t){return jt(t)&&Tt(t.length)&&!!l[st(t)]};function Pt(t){return wt(t)?Q(t,!0):lt(t)}var Ct,St=(Ct=function(t,e,n){ut(t,e,n)},pt((function(t,e){var n=-1,r=e.length,a=r>1?e[r-1]:void 0,i=r>2?e[2]:void 0;for(a=Ct.length>3&&"function"==typeof a?(r--,a):void 0,i&&function(t,e,n){if(!kt(n))return!1;var r=typeof e;return!!("number"==r?wt(n)&&dt(e,n.length):"string"==r&&e in n)&&bt(n[e],t)}(e[0],e[1],i)&&(a=r<3?void 0:a,r=1),t=Object(t);++n<r;){var s=e[n];s&&Ct(t,s,n,a)}return t})));function At(t){return t}t.exports=St})),ut=y((function(t){!function(e,n,r){if(e){for(var a,i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},c={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l=1;l<20;++l)i[111+l]="f"+l;for(l=0;l<=9;++l)i[l+96]=l.toString();v.prototype.bind=function(t,e,n){var r=this;return t=t instanceof Array?t:[t],r._bindMultiple.call(r,t,e,n),r},v.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},v.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},v.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},v.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(y(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var n=t.composedPath()[0];n!==t.target&&(e=n)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},v.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},v.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);a=null},v.init=function(){var t=v(n);for(var e in t)"_"!==e.charAt(0)&&(v[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},v.init(),e.Mousetrap=v,t.exports&&(t.exports=v)}function u(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function p(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return i[t.which]?i[t.which]:s[t.which]?s[t.which]:String.fromCharCode(t.which).toLowerCase()}function f(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function h(t,e,n){return n||(n=function(){if(!a)for(var t in a={},i)t>95&&t<112||i.hasOwnProperty(t)&&(a[i[t]]=t);return a}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function d(t,e){var n,r,a,i=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),a=0;a<n.length;++a)r=n[a],c[r]&&(r=c[r]),e&&"keypress"!=e&&o[r]&&(r=o[r],i.push("shift")),f(r)&&i.push(r);return{key:r,modifiers:i,action:e=h(r,i,e)}}function y(t,e){return null!==t&&t!==n&&(t===e||y(t.parentNode,e))}function v(t){var e=this;if(t=t||n,!(e instanceof v))return new v(t);e.target=t,e._callbacks={},e._directMap={};var r,a={},i=!1,s=!1,o=!1;function c(t){t=t||{};var e,n=!1;for(e in a)t[e]?n=!0:a[e]=0;n||(o=!1)}function l(t,n,r,i,s,o){var c,l,u,p,h=[],d=r.type;if(!e._callbacks[t])return[];for("keyup"==d&&f(t)&&(n=[t]),c=0;c<e._callbacks[t].length;++c)if(l=e._callbacks[t][c],(i||!l.seq||a[l.seq]==l.level)&&d==l.action&&("keypress"==d&&!r.metaKey&&!r.ctrlKey||(u=n,p=l.modifiers,u.sort().join(",")===p.sort().join(",")))){var y=!i&&l.combo==s,v=i&&l.seq==i&&l.level==o;(y||v)&&e._callbacks[t].splice(c,1),h.push(l)}return h}function h(t,n,r,a){e.stopCallback(n,n.target||n.srcElement,r,a)||!1===t(n,r)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function y(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=p(t);n&&("keyup"!=t.type||i!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):i=!1)}function _(t,e,n,s){function l(e){return function(){o=e,++a[t],clearTimeout(r),r=setTimeout(c,1e3)}}function u(e){h(n,e,t),"keyup"!==s&&(i=p(e)),setTimeout(c,10)}a[t]=0;for(var f=0;f<e.length;++f){var y=f+1===e.length?u:l(s||d(e[f+1]).action);b(e[f],y,s,t,f)}}function b(t,n,r,a,i){e._directMap[t+":"+r]=n;var s,o=(t=t.replace(/\s+/g," ")).split(" ");o.length>1?_(t,o,n,r):(s=d(t,r),e._callbacks[s.key]=e._callbacks[s.key]||[],l(s.key,s.modifiers,{type:s.action},a,t,i),e._callbacks[s.key][a?"unshift":"push"]({callback:n,modifiers:s.modifiers,action:s.action,seq:a,level:i,combo:t}))}e._handleKey=function(t,e,n){var r,a=l(t,e,n),i={},u=0,p=!1;for(r=0;r<a.length;++r)a[r].seq&&(u=Math.max(u,a[r].level));for(r=0;r<a.length;++r)if(a[r].seq){if(a[r].level!=u)continue;p=!0,i[a[r].seq]=1,h(a[r].callback,n,a[r].combo,a[r].seq)}else p||h(a[r].callback,n,a[r].combo);var d="keypress"==n.type&&s;n.type!=o||f(t)||d||c(i),s=p&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var r=0;r<t.length;++r)b(t[r],e,n)},u(t,"keypress",y),u(t,"keydown",y),u(t,"keyup",y)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)})),pt=y((function(t,e){t.exports=function(){function t(t,e){var n;for(n in e)c(e,n)&&(t[n]=e[n])}function e(e,n){var r,a;for(r=0,a=arguments.length;r<a;++r)(n=arguments[r])&&t(e,n);return e}function n(t,e){return e.length-t.length}function r(t,e){return t.factor-e.factor}function a(t){return t.replace(/([.*+?=^!:${}()|[\]/\\])/g,"\\$1")}function i(t,e){var n,r;for(n=0,r=t.length;n<r;++n)e(t[n],n)}function s(t,e){var n;for(n in t)c(t,n)&&e(t[n],n)}var o,c=function(t){return function(e,n){return e&&t.call(e,n)}}(Object.prototype.hasOwnProperty),l=(o=Object.prototype.toString,function(t){return o.call(t)});function u(t){return null!=t}var p,f=(p=l(0),function(t){return t==t&&l(t)===p}),h=function(t){return function(e){return l(e)===t}}(l(""));function d(t,e){for(;h(e);)e=t[e];return e}function y(t,e){if(!e)return Math.round(t);var n=Math.pow(10,e);return Math.round(t*n)/n}function v(t){this._prefixes=t;var e=[],i=[];s(t,(function(t,n){e.push(a(n)),i.push({factor:t,prefix:n})}));var o=this._lcPrefixes={};s(t,(function(e,n){var r=n.toLowerCase();c(t,r)||(o[r]=n)})),i.sort(r),this._list=i,e.sort(n),this._regexp=new RegExp("^\\s*(\\d+(?:\\.\\d+)?)\\s*("+e.join("|")+")\\s*(.*)\\s*?$","i")}v.create=function(t,e,n){var r={};return i(t,(function(t,a){r[t]=Math.pow(e,a+(n||0))})),new v(r)},v.prototype.findPrefix=function(t){for(var e,n=this._list,r=0,a=n.length-1;r!==a;)n[e=r+a+1>>1].factor>t?a=e-1:r=e;return n[r]},v.prototype.parse=function(t,e){var n=t.match(this._regexp);if(!n)return null;var r,a=n[2];if(c(this._prefixes,a))r=this._prefixes[a];else{if(e||(a=a.toLowerCase(),!c(this._lcPrefixes,a)))return null;a=this._lcPrefixes[a],r=this._prefixes[a]}return{factor:r,prefix:a,unit:n[3],value:+n[1]}};var _={binary:v.create(",ki,Mi,Gi,Ti,Pi,Ei,Zi,Yi".split(","),1024),SI:v.create("y,z,a,f,p,n,Âµ,m,,k,M,G,T,P,E,Z,Y".split(","),1e3,-8)},b={scale:"SI",strict:!1,unit:"",decimals:2,separator:" "};function m(t,n){var r=x(t,n=e({},b,n)),a=r.prefix+n.unit;return y(r.value,n.decimals)+(a?n.separator+a:"")}function g(t,e){var n=w(t,e);return n.value*n.factor}function w(t,n){if(!h(t))throw new TypeError("str must be a string");n=e({},b,n);var r=d(_,n.scale);if(!r)throw new Error("missing scale");var a=r.parse(t,n.strict);if(!a)throw new Error("cannot parse str");return a}function x(t,n){if(0===t)return{value:0,prefix:""};if(!f(t))throw new TypeError("value must be a number");n=e({},b,n);var r=d(_,n.scale);if(!r)throw new Error("missing scale");var a,i=n.prefix;if(u(i)){if(!c(r._prefixes,i))throw new Error("invalid prefix");a=r._prefixes[i]}else{var s=r.findPrefix(t);i=s.prefix,a=s.factor}return{prefix:i,value:t/=a}}return m.parse=g,g.raw=w,m.raw=x,m.Scale=v,m}()})),ft=new pt.Scale({ms:1,sec:1e3,min:6e4,hours:36e5}),ht=new pt.Scale({"%":1}),dt={general:{volume:{scale:ht}},timers:{startup:{scale:ft},watch:{scale:ft},pause:{scale:ft},buffering:{scale:ft},session:{scale:ft},latency:{scale:ft}},extra:{buffersize:{scale:ft},duration:{scale:ft},currentTime:{scale:ft},bitrateWeightedMean:{unit:"bps"},bitrateMostUsed:{unit:"bps"},bandwidth:{unit:"bps"},watchedPercentage:{scale:ht},bufferingPercentage:{scale:ht}}},yt=function(){function t(){e(this,t)}return r(t,null,[{key:"format",value:function(t){var e={};return Object.keys(t).forEach((function(n){e[n]={};var r=dt[n];Object.keys(t[n]).forEach((function(a){var i=t[n][a];if(r&&r[a]&&"number"==typeof i&&!isNaN(i)){var s=r[a].scale||"SI",o=r[a].unit||"";e[n][a]=pt(i,{scale:s,unit:o,decimals:2})}else e[n][a]=i}))})),e}}]),t}(),vt={general:{label:"General",metrics:{displayResolution:{label:"resolution"},volume:{label:"volume"}}},counters:{label:"Counters",metrics:{play:{label:"Plays",separator:": "},pause:{label:"Pauses",separator:": "},error:{label:"Errors",separator:": "},buffering:{label:"Bufferings",separator:": "},decodedFrames:{label:"Decoded frames",separator:": "},droppedFrames:{label:"Dropped frames",separator:": "},fps:{label:"Frames per second",separator:": "},changeLevel:{label:"Bitrate changes",separator:": "},seek:{label:"Seeks",separator:": "},fullscreen:{label:"Fullscreen",separator:": "},dvrUsage:{label:"DVR seeks",separator:": "}}},timers:{label:"Timers",metrics:{startup:{label:"Startup time",separator:": "},watch:{label:"Watching time",separator:": "},pause:{label:"Pause time",separator:": "},buffering:{label:"Buffering time",separator:": "},session:{label:"Session time",separator:": "},latency:{label:"Latency",separator:": "}}},extra:{label:"Extras",metrics:{playbackName:{label:"Playback",separator:": "},playbackType:{label:"Playback type",separator:": "},buffersize:{label:"Buffer size",separator:": "},duration:{label:"Video duration",separator:": "},currentTime:{label:"Current time",separator:": "},bitratesHistory:{label:"Session time",separator:": "},bitrateWeightedMean:{label:"Bitrate weighted mean",separator:": "},bitrateMostUsed:{label:"Bitrate most used",separator:": "},watchHistory:{label:"Watch History",separator:": "},watchedPercentage:{label:"% Watched",separator:": "},bufferingPercentage:{label:"% Buffering",separator:": "},bandwidth:{label:"Bandwidth",separator:": "}}}};return function(n){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(s,n);var a=o(s);function s(t){var n;e(this,s),(n=a.call(this,t))._shortcut=at(t,"options.clapprNerdStats.shortcut",["command+shift+s","ctrl+shift+s"]),n._iconPosition=at(t,"options.clapprNerdStats.iconPosition","top-right"),n._nerdTitle=at(t,"options.clapprNerdStats.nerdTitle","Nerd Stats");var r=at(t,"options.clapprNerdStats.metricLabels",{});return n.metrics={},n.selectedMetricsType=0,n.metricLabels=lt(vt,r),n.statsScroll=!0,n.isReady=!1,n.buttonIsShowing=!1,n._Mousetrap=new ut(window),n}return r(s,[{key:"name",get:function(){return"clappr-nerd-stats"}},{key:"template",get:function(){return t.template('<% general = metrics.general %>\n\n<div class="icon-show-stats <%= buttonIsShowing ? \'\' : \'hide-button\' %> <%= iconPosition %> <%= isActive %> <%= isReady ? \'ready\' : \'\' %>" data-show-stats-button>\n  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" height="50" width="50">\n    <defs id="defs26">\n      <filter style="color-interpolation-filters:sRGB;" inkscape:label="Drop Shadow" id="filter924">\n        <feFlood flood-opacity="0.498039" flood-color="rgb(0,0,0)" result="flood" id="feFlood914"/>\n        <feComposite in="flood" in2="SourceGraphic" operator="in" result="composite1" id="feComposite916"/>\n        <feGaussianBlur in="composite1" stdDeviation="3" result="blur" id="feGaussianBlur918"/>\n        <feOffset dx="0" dy="0" result="offset" id="feOffset920"/>\n        <feComposite in="SourceGraphic" in2="offset" operator="over" result="composite2" id="feComposite922"/>\n      </filter>\n    </defs>\n    <path id="path20" style="fill:#ffffff;fill-opacity:1;stroke-width:0.857712;filter:url(#filter924)" d="m 16.21416,8.6896525 c -5.491328,0 -9.8837771,4.3947995 -9.8837771,9.8861285 0,2.638942 0.6337291,4.876394 2.2828618,7.347002 h 6.4018843 l 3.178607,-11.861002 a 1.2038534,1.2038534 0 0 1 1.116746,-0.891045 1.2038534,1.2038534 0 0 1 1.208434,0.891045 l 4.631551,17.291907 3.166852,-11.816332 a 1.2038534,1.2038534 0 0 1 2.320478,-0.01645 l 1.824408,6.401884 h 8.924551 c 1.649132,-2.470608 2.282861,-4.70806 2.282861,-7.347002 0,-5.491329 -4.392449,-9.8861285 -9.883777,-9.8861285 -4.502887,0 -7.028616,2.5277165 -8.78584,4.5045945 -1.757224,-1.976878 -4.282953,-4.5045945 -8.78584,-4.5045945 z m 3.140991,10.3328245 -2.254648,8.414378 a 1.2038534,1.2038534 0 0 1 -1.161415,0.893395 h -5.463819 c 2.766077,3.176431 7.144541,6.95864 13.86644,12.429954 L 25,41.310347 25.658291,40.760204 C 32.38019,35.28889 36.758654,31.506681 39.524731,28.330249 h -7.97238 A 1.2038534,1.2038534 0 0 1 30.39564,27.455663 l -0.879291,-3.089269 -3.202117,11.950342 a 1.2038534,1.2038534 0 0 1 -2.32518,0 z"/>\n  </svg>\n</div>\n\n<div class="stats-box <%= isBoxActive %>">\n  <a class="close-button" data-close-button>&times;</a>\n  <div class="nerd-title">\n    <%= nerdTitle %>\n  </div>\n  <div class="general">\n    <div class="general-metric">\n      <div class="metric">\n        <%= general.displayResolution %>\n      </div>\n      <div class="metric-title">\n        resolution\n      </div>\n    </div>\n    <div class="general-metric">\n      <div class="metric">\n        <%= general.volume %>\n      </div>\n      <div class="metric-title">\n        volume\n      </div>\n    </div>\n  </div>\n  <div>\n    <div class="metric-selector">\n      <% for (let i = 0; i < Object.keys(metrics).length; i++) { %>\n        <% if (Object.keys(metrics)[i] !== \'general\') { %>\n          <div class="metric-selector-item">\n            <a href="#" class="<%= selectedMetricsType === i ? \'active\' : \'\' %>" data-metric-selector-select="<%=i %>">\n              <%= metricLabels[Object.keys(metrics)[i]].label %>\n            </a>\n          </div>\n        <% }; %>\n      <% }; %>\n    </div>\n  </div>\n\n  <div class="stats <%= statsScroll ? \'scroll\' : \'\' %>">\n    <% for (let i = 0; i < Object.keys(metrics).length; i++) { %>\n      <% if (Object.keys(metrics)[i] !== \'general\') { %>\n        <% metricType = Object.keys(metrics)[i] %>\n        <ul id="list-<%= i %>" class="<%= selectedMetricsType === i ? \'current\' : \'\' %>">\n          <% for (let a = 0; a < Object.keys(metrics[metricType]).length; a++) { %>\n            <% metric = Object.keys(metrics[metricType])[a] %>\n            <li>\n              <%= metricLabels[metricType].metrics[metric].label %>\n              <%= metricLabels[metricType].metrics[metric].separator %>\n              <div><span><%= metrics[metricType][metric] %></span></div>\n            </li>\n          <% }; %>\n        </ul>\n      <% }; %>\n    <% }; %>\n  </div>\n</div>\n')}},{key:"attributes",get:function(){return{"data-clappr-nerd-stats":"",class:"clappr-nerd-stats"}}},{key:"events",get:function(){return{"click [data-show-stats-button]":"showOrHide","click [data-close-button]":"hide","click [data-metric-selector-select]":"selectStatsType"}}},{key:"statsBoxElem",get:function(){return".clappr-nerd-stats[data-clappr-nerd-stats] .stats-box"}},{key:"statsIconElem",get:function(){return".clappr-nerd-stats[data-clappr-nerd-stats] .icon-show-stats"}},{key:"statsBoxWidthThreshold",get:function(){return 720}},{key:"playerWidth",get:function(){return this.core.currentSize.width}},{key:"playerHeight",get:function(){return this.core.currentSize.height}},{key:"bindEvents",value:function(){this.listenToOnce(this.core,t.Events.CORE_READY,this.init)}},{key:"init",value:function(){var e=this;this.container=this.core.getCurrentContainer();var n=this.container.getPlugin("clappr_stats");this.listenTo(this.container,t.Events.CONTAINER_MEDIACONTROL_HIDE,this.hideButton),this.listenTo(this.container,t.Events.CONTAINER_MEDIACONTROL_SHOW,this.showButton),void 0===n?(console.error("clappr-stats not available. Please, include it as a plugin of your Clappr instance.\nFor more info, visit: https://github.com/clappr/clappr-stats."),this.disable()):(this._Mousetrap.bind(this._shortcut,(function(){return e.showOrHide()})),this.listenTo(this.container,t.Events.PLAYER_RESIZE,this.onPlayerResize),this.listenTo(this.container,t.Events.PLAYER_FULLSCREEN,this.onPlayerResize),this.listenTo(n,st.REPORT_EVENT,this.updateMetrics),this.updateMetrics(n._metrics),this.render())}},{key:"showOrHide",value:function(t){this.showing?this.hide(t):this.show(t)}},{key:"show",value:function(t){this.core.$el.find(this.statsBoxElem).removeClass("hidden"),this.core.$el.find(this.statsIconElem).addClass("active"),this.showing=!0,t&&t.stopPropagation()}},{key:"hide",value:function(t){this.core.$el.find(this.statsBoxElem).addClass("hidden"),this.core.$el.find(this.statsIconElem).removeClass("active"),this.showing=!1,t&&t.stopPropagation()}},{key:"hideButton",value:function(){this.core.$el.find(this.statsIconElem).addClass("hide-button"),this.buttonIsShowing=!1}},{key:"showButton",value:function(){var t=this.core.$el.find(this.statsIconElem);t.hasClass("ready")||this.isReady||(t.addClass("ready"),this.isReady=!0),this.core.$el.find(this.statsIconElem).removeClass("hide-button"),this.buttonIsShowing=!0}},{key:"selectStatsType",value:function(t){var e=parseInt(t.target.dataset.metricSelectorSelect);if(e===this.selectedMetricsType)return!1;var n=this.core.$el.find(this.statsBoxElem).find(".metric-selector-item a"),r=this.core.$el.find(this.statsBoxElem).find(t.target),a=this.core.$el.find(this.statsBoxElem).find("#list-"+this.selectedMetricsType),i=this.core.$el.find(this.statsBoxElem).find("#list-"+e);return n.removeClass("active"),r.addClass("active"),this.animateListChange(a,i,e<this.selectedMetricsType),this.selectedMetricsType=e,t.stopPropagation(),!1}},{key:"animateListChange",value:function(t,e,n){e.addClass(n?"reverse":"forward"),t.addClass(n?"reverse":"forward"),e.addClass("enter"),t.addClass("leave");var r=e[0].clientHeight,a=this.core.$el.find(this.statsBoxElem).find(".stats");r>190&&!a.hasClass("scroll")?(a.addClass("scroll"),this.statsScroll=!0):r<190&&a.hasClass("scroll")&&(a.removeClass("scroll"),this.statsScroll=!1),setTimeout((function(){t.removeClass("current"),t.removeClass("leave"),t.removeClass(n?"reverse":"forward"),e.removeClass(n?"reverse":"forward"),e.addClass("current"),e.removeClass("enter")}),200)}},{key:"onPlayerResize",value:function(){this.setStatsBoxSize()}},{key:"addGeneralMetrics",value:function(){this.metrics.general={displayResolution:this.playerWidth+"x"+this.playerHeight,volume:this.container.volume}}},{key:"updateMetrics",value:function(t){this.metrics=ct(t),this.addGeneralMetrics();var e=this.core.$el.find(this.statsBoxElem).scrollTop();this.$el.html(this.template({metrics:yt.format(this.metrics),iconPosition:this._iconPosition,isActive:this.showing?"active":"",isBoxActive:this.showing?"":"hidden",nerdTitle:this._nerdTitle,metricLabels:this.metricLabels,selectedMetricsType:this.selectedMetricsType,statsScroll:this.statsScroll,isReady:this.isReady,buttonIsShowing:this.buttonIsShowing})),this.setStatsBoxSize(),this.core.$el.find(this.statsBoxElem).scrollTop(e),this.showing||this.hide()}},{key:"setStatsBoxSize",value:function(){this.playerWidth>=this.statsBoxWidthThreshold?(this.$el.find(this.statsBoxElem).addClass("wide"),this.$el.find(this.statsBoxElem).removeClass("narrow")):(this.$el.find(this.statsBoxElem).removeClass("wide"),this.$el.find(this.statsBoxElem).addClass("narrow"))}},{key:"render",value:function(){var e=t.Styler.getStyleFor(ot,{baseUrl:this.options.baseUrl});return this.core.$el.append(e[0]),this.core.$el.append(this.$el[0]),this.hide(),this}}]),s}(t.UICorePlugin)}));
